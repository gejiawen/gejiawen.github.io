

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    
    <meta name="author" content="gejiawen">
    
    <meta name="description" content="Directive可能是AngularJS中比较复杂的一个东西了。一般我们将其理解成指令。AngularJS自带了不少预设的指令，比如ng-app，ng-controller这些。可以发现个特点，AngularJS自带的指令都是由ng-打头的。
那么，Directive究竟是个怎么样的一个东西呢？我">
    
    

    
    <link rel="alternative" href="atom.xml" title="蛋糕仙人" type="application/atom+xml">
    
    
    

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>AngularJS Directive用法说明 | 蛋糕仙人 · 技术人需要危机感</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/style.css">

    <!-- Javascript -->
    <script src="/js/jquery-2.1.0.min.js"></script>
    <script src="/js/jquery.backstretch.min.js"></script>
    <script src="/bootstrap/js/bootstrap.min.js"></script>
    <script src="/js/headroom.min.js"></script>
    <script src="/js/jquery.headroom.min.js"></script>
    <script src="/js/common.js"></script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    
    <meta name="baidu-site-verification" content="SzJ3MGdmeo" />


    <meta name="360-site-verification" content="afe5dc96bbb8d111b618f78493b95bb8" />


    <!--<meta name="baidu-site-verification" content="SzJ3MGdmeo" />-->
    <!--<meta name="360-site-verification" content="afe5dc96bbb8d111b618f78493b95bb8" />-->

</head>
<body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-inverse" role="banner">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="http://blog.gejiawen.com" title="蛋糕仙人">蛋糕仙人</a>
            </div>

            <div role="navigation" class="collapse navbar-collapse bs-navbar-collapse">
                
                <ul class="nav navbar-nav pull-right">
                    <li>
                        <a class="max-width max-w300" title="技术人需要危机感" href="/feelings">技术人需要危机感</a>
                    </li>
                </ul>
                

                <ul class="nav navbar-nav">
                    
                    <li id="nav-index">
                        <a href="/" target="">首页</a>
                    </li>
                    
                    <li id="nav-archives">
                        <a href="/archives" target="">归档</a>
                    </li>
                    
                    <li id="nav-categories">
                        <a href="/categories" target="">分类</a>
                    </li>
                    
                    <li id="nav-tags">
                        <a href="/tags" target="">标签</a>
                    </li>
                    
                    <li id="nav-pick">
                        <a href="http://book.gejiawen.com/fucking-days-to-be-a-coder" target="_blank">拾遗</a>
                    </li>
                    
                    <li id="nav-about">
                        <a href="/about" target="">关于</a>
                    </li>
                    

                    <li id="nav-github"><a href="https://github.com/gejiawen" target="_blank">GitHub</a></li>
                    <!--<li id="nav-rss"><a href="/atom.xml" target="_blank">Rss</a></li>-->
                    <li id="nav-search"><input type="text" id="search" placeholder="search" /></li>
                </ul>
            </div>
        </div>
    </nav>

    <script>
    var bgRoot = "http://7xkwt1.com1.z0.glb.clouddn.com/background-";
    var bgLength = "74";
    var bgRandom = false;
    var bgImage = "http://7xkwt1.com1.z0.glb.clouddn.com/background-64.jpg";

    $(function() {
        // page-id...
        var pageId = "2014/07/16/usage-for-angularjs-directive/";
        pageId = pageId.substr(0, pageId.indexOf("/"));
        if(pageId === "") pageId = "index";

        $("#nav-" + pageId).addClass("active");
    });
    </script>

    <article class="post container">
    <div class="well post-body first-post last-post">
        <h1>AngularJS Directive用法说明</h1>

        <div class="time-info">
            
<span class="article-tags">
    
    Tags: <a href="/tags/ng/">ng</a>&nbsp;
</span>



<span class="article-categories">
    Category:
    <a class="article-category-link" href="/categories/ANGULARJS/">ANGULARJS</a>
</span>


        </div>
        <div class="time-info">
            发表: <time datetime="2014-07-16T06:22:51.000Z"
                       itemprop="datePublished">2014-07-16 14:22:51</time>
            
            更新: <time datetime="2017-01-15T17:16:24.000Z"
                       itemprop="dateModified">2017-01-16 01:16:24</time>
            
        </div>

        <div class="post-body-inner">
            
                <div id="toc" class="toc-article well">
                    <strong class="toc-title">大纲</strong>
                    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#AnguarJS-directive的常用定义格式以及参数说明"><span class="toc-number">1.</span> <span class="toc-text">AnguarJS directive的常用定义格式以及参数说明</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#直接return"><span class="toc-number">1.1.</span> <span class="toc-text">直接return</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#return对象参数说明"><span class="toc-number">1.2.</span> <span class="toc-text">return对象参数说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#关于scope"><span class="toc-number">1.3.</span> <span class="toc-text">关于scope</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#directive-实例讲解"><span class="toc-number">2.</span> <span class="toc-text">directive 实例讲解</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#directive声明实例"><span class="toc-number">2.1.</span> <span class="toc-text">directive声明实例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#template与templateUrl的区别和联系"><span class="toc-number">2.2.</span> <span class="toc-text">template与templateUrl的区别和联系</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#scope重定义"><span class="toc-number">2.3.</span> <span class="toc-text">scope重定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#transclude的使用"><span class="toc-number">2.4.</span> <span class="toc-text">transclude的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#controller，link，compile之间的关系"><span class="toc-number">2.5.</span> <span class="toc-text">controller，link，compile之间的关系</span></a></li></ol></li></ol>
                </div>
            

            <p><strong>Directive</strong>可能是AngularJS中比较复杂的一个东西了。一般我们将其理解成<strong>指令</strong>。AngularJS自带了不少预设的指令，比如<code>ng-app</code>，<code>ng-controller</code>这些。可以发现个特点，AngularJS自带的指令都是由<code>ng-</code>打头的。</p>
<p>那么，<strong>Directive</strong>究竟是个怎么样的一个东西呢？我个人的理解是这样的：<em>将一段html、js封装在一起，形成一个可复用的独立个体，具体特定的功能</em>。下面我们来详细解读一下<strong>Directive</strong>的一般性用法。</p>
<h1 id="AnguarJS-directive的常用定义格式以及参数说明"><a href="#AnguarJS-directive的常用定义格式以及参数说明" class="headerlink" title="AnguarJS directive的常用定义格式以及参数说明"></a>AnguarJS directive的常用定义格式以及参数说明</h1><h2 id="直接return"><a href="#直接return" class="headerlink" title="直接return"></a>直接return</h2><p>看下面的代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myDirective = angular.module(<span class="string">'directives'</span>, []);</span><br><span class="line"></span><br><span class="line">myDirective.directive(<span class="string">'directiveName'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$inject</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        template: <span class="string">'&lt;div&gt;&lt;/div&gt;'</span>,</span><br><span class="line">        replace: <span class="literal">false</span>,</span><br><span class="line">        transclude: <span class="literal">true</span>,</span><br><span class="line">        restrict: <span class="string">'E'</span>,</span><br><span class="line">        scope: &#123;&#125;,</span><br><span class="line">        controller: <span class="function"><span class="keyword">function</span>(<span class="params">$scope, $element</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">        &#125;,</span><br><span class="line">        complie: <span class="function"><span class="keyword">function</span>(<span class="params">tElement, tAttrs, transclude</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                pre: <span class="function"><span class="keyword">function</span> <span class="title">preLink</span>(<span class="params">scope, iElement, iAttrs, controller</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">                &#125;,</span><br><span class="line">                post: <span class="function"><span class="keyword">function</span> <span class="title">postLink</span>(<span class="params">scope, iElement, iAttrs, controller</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;,</span><br><span class="line">        link: <span class="function"><span class="keyword">function</span>(<span class="params">scope, iElement, iAttrs</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>这里直接return了一个object，对象中包括比较多的属性，这些属性都是对自定义directive的定义。详细的含义，下面会继续说明。</p>
<h2 id="return对象参数说明"><a href="#return对象参数说明" class="headerlink" title="return对象参数说明"></a>return对象参数说明</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">    name: <span class="string">''</span>,</span><br><span class="line">    priority: <span class="number">0</span>,</span><br><span class="line">    terminal: <span class="literal">true</span>,</span><br><span class="line">    scope: &#123;&#125;,</span><br><span class="line">    controller: fn,</span><br><span class="line">    <span class="built_in">require</span>: fn,</span><br><span class="line">    restrict: <span class="string">''</span>,</span><br><span class="line">    template: <span class="string">''</span>,</span><br><span class="line">    templateUrl: <span class="string">''</span>,</span><br><span class="line">    replace: <span class="string">''</span>,</span><br><span class="line">    transclude: <span class="literal">true</span>,</span><br><span class="line">    compile: fn,</span><br><span class="line">    link: fn</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如上所示，return的对象中会有很多的属性，这行属性都是用来定义directive的。下面我们来一个个的说明他们的作用。</p>
<ul>
<li><code>name</code><br>表示当前scope的名称，一般声明时使用默认值，不用手动设置此属性。</li>
<li><code>priority</code><br>优先级。当有多个directive定义在同一个DOM元素上时，有时需要明确他们的执行顺序。这个属性用于在directive的compile function调用之前进行排序。如果优先级相同，则执行顺序是不确定的（根据经验，优先级高的先执行，相同优先级时按照<strong>先绑定后执行</strong>）。</li>
<li><code>teminal</code><br>最后一组。如果设置为<code>true</code>，则表示当前的priority将会成为最后一组执行的directive，即比此directive的priority更低的directive将不会执行。同优先级依然会执行，但是顺序不确定。</li>
<li><code>scope</code><ul>
<li><code>true</code><br>  将为这个directive创建一个新的scope。如果在同一个元素中有多个directive需要新的scope的话，它还是只会创建一个scope。新的作用域规则不适用于根模版，因为根模版往往会获得一个新的scope。</li>
<li><code>{}</code><br>  将创建一个新的、独立的scope，此scope与一般的scope的区别在于<strong>它不是通过原型继承于父scope的</strong>。这对于创建可复用的组件是很有帮助的，可以有效的防止读取或者修改父级scope的数据。这个独立的scope会创建一个拥有一组来源于父scope的本地scope属性hash集合。这些本地scope属性对于模版创建值的别名很有帮助。本地的定义是对其来源的一组本地scope property的hash映射。</li>
</ul>
</li>
<li><code>controller</code><br>controller构造函数。controller会在pre-linking步骤之前进行初始化，并允许其他directive通过指定名称的require进行共享。这将允许directive之间相互沟通，增强相互之间的行为。controller默认注入了以下本地对象：<ul>
<li><code>$scope</code> 与当前元素结合的scope</li>
<li><code>$element</code> 当前的元素</li>
<li><code>$attrs</code>  当前元素的属性对象</li>
<li><code>$transclude</code> 一个预先绑定到当前scope的转置linking function</li>
</ul>
</li>
<li><code>require</code><br>请求另外的controller，传入当前directive的linking function中。require需要传入一个directive controller的名称。如果找不到这个名称对应的controller，那么将会抛出一个error。名称可以加入以下前缀：<ul>
<li><code>?</code> 不要抛出异常。这将使得这个依赖变为一个可选项</li>
<li><code>^</code> 允许查找父元素的controller</li>
</ul>
</li>
<li><code>restrict</code><br>EACM的子集的字符串，它限制了directive为指定的声明方式。如果省略的话，directive将仅仅允许通过属性声明<ul>
<li><code>E</code> 元素名称： <my-directive></my-directive></li>
<li><code>A</code> 属性名：<div my-directive="exp"></div></li>
<li><code>C</code> class名：<div class="my-directive:exp"></div></li>
<li><code>M</code> 注释：<!-- directive: my-directive:exp --></li>
</ul>
</li>
<li><code>template</code><br>如果<code>replace</code>为true，则将模版内容替换当前的html元素，并将原来元素的属性、class一并转移；如果<code>replace</code>为false，则将模版元素当作当前元素的子元素处理。</li>
<li><code>templateUrl</code><br>与template基本一致，但模版通过指定的url进行加载。因为模版加载是异步的，所有compilation、linking都会暂停，等待加载完毕后再执行。</li>
<li><code>replace</code><br>如果设置为true，那么模版将会替换当前元素，而不是作为子元素添加到当前元素中。（<strong>为true时，模版必须有一个根节点</strong>）</li>
<li><code>transclude</code><br>编译元素的内容，使它能够被directive使用。需要在模版中配合<code>ngTransclude</code>使用。transclusion的有点是linking function能够得到一个预先与当前scope绑定的transclusion function。一般地，建立一个widget，创建独立scope，transclusion不是子级的，而是独立scope的兄弟级。这将使得widget拥有私有的状态，transclusion会被绑定到父级scope中。<strong>（上面那段话没看懂。但实际实验中，如果通过<any my-directive=""></any>调用myDirective，而transclude设置为true或者字符串且template中包含<sometag ng-transclude="">的时候，将会将的编译结果插入到sometag的内容中。如果any的内容没有被标签包裹，那么结果sometag中将会多了一个span。如果本来有其他东西包裹的话，将维持原状。但如果transclude设置为’element’的话，any的整体内容会出现在sometag中，且被p包裹）</sometag></strong><ul>
<li>true/false  转换这个directive的内容。（这个感觉上，是直接将内容编译后搬入指定地方）</li>
<li>‘element’  转换整个元素，包括其他优先级较低的directive。（像将整体内容编译后，当作一个整体（外面再包裹p），插入到指定地方）</li>
</ul>
</li>
<li><code>compile</code><br>这里是compile function，将在下面实例详细说明</li>
<li><code>link</code><br>这里是link function ，将在下面实例详细讲解。这个属性仅仅是在compile属性没有定义的情况下使用。</li>
</ul>
<h2 id="关于scope"><a href="#关于scope" class="headerlink" title="关于scope"></a>关于scope</h2><p>这里关于directive的scope为一个object时，有更多的内容非常有必要说明一下。看下面的代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">scope: &#123;</span><br><span class="line">    name: <span class="string">'='</span>,</span><br><span class="line">    age: <span class="string">'='</span>,</span><br><span class="line">    sex: <span class="string">'@'</span>,</span><br><span class="line">    say: <span class="string">'&amp;'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个<code>scope</code>中关于各种属性的配置出现了一些奇怪的前缀符号，有<code>=</code>，<code>@</code>，<code>&amp;</code>，那么这些符号具体的含义是什么呢？再看下面的代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">my-directive</span> <span class="attr">name</span>=<span class="string">"myName"</span> <span class="attr">age</span>=<span class="string">"myAge"</span> <span class="attr">sex</span>=<span class="string">"male"</span> <span class="attr">say</span>=<span class="string">"say()"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Controller</span>(<span class="params">$scope</span>) </span>&#123;</span><br><span class="line">    $scope.name = <span class="string">'Pajjket'</span>;</span><br><span class="line">    $scope.age = <span class="number">99</span>;</span><br><span class="line">    $scope.sex = <span class="string">'我是男的'</span>;</span><br><span class="line">    $scope.say = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        alert(<span class="string">'Hello，我是弹出消息'</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以看出，几种修饰前缀符的大概含义：</p>
<ul>
<li><code>=</code>: 指令中的属性取值为Controller中对应$scope上属性的取值</li>
<li><code>@</code>: 指令中的取值为html中的字面量/直接量</li>
<li><code>&amp;</code>： 指令中的取值为Controller中对应$scope上的属性，但是这个属性必须为一个函数回调</li>
</ul>
<p>下面是更加官方的解释：</p>
<ul>
<li><code>=</code>或者<code>=expression/attr</code><br>  在本地scope属性与parent scope属性之间设置双向的绑定。如果没有指定<code>attr</code>名称，那么本地名称将与属性名称一致。<br>  例如：<br>  <widget my-attr="parentModel">中，widget定义的scope为：<code>{localModel: &#39;=myAttr&#39;}</code>，那么widget scope property中的<code>localName</code>将会映射父scope的<code>parentModel</code>。如果<code>parentModel</code>发生任何改变，localModel也会发生改变，反之亦然。即<strong>双向绑定</strong>。</widget></li>
<li><code>@</code>或者<code>@attr</code><br>  建立一个local scope property到DOM属性的绑定。因为属性值总是String类型，所以这个值总返回一个字符串。如果没有通过<code>@attr</code>指定属性名称，那么本地名称将与DOM属性的名称一致。<br>  例如：<br>  <widget my-attr="hello ">，widget的scope定义为：<code>{localName: &#39;@myAttr&#39;}</code>。那么，widget scope property的localName会映射出<code>&quot;hello &quot;</code>转换后的真实值。当name属性值发生改变后，widget scope的localName属性也会相应的改变（<strong>仅仅是单向，与上面的<code>=</code>不同</strong>）。那么属性是在父scope读取的（不是从组件的scope读取的）</widget></li>
<li><code>&amp;</code>或者<code>&amp;attr</code><br>  提供一个在父scope上下文中执行一个表达式的途径。如果没有指定attr的名称，那么local name将与属性名一致。<br>  例如：<br>  <code>&lt;widget my-attr=&quot;count = count + value&quot;&gt;</code>，widget的scope定义为：<code>{localFn:’increment()’}</code>，那么isolate scope property <code>localFn</code>会指向一个包裹着increment()表达式的function。<br>  一般来说，我们希望通过一个表达式，将数据从isolate scope传到parent scope中。这可以通过传送一个本地变量键值的映射到表达式的wrapper函数中来完成。例如，如果表达式是increment(amount)，那么我们可以通过<code>localFn({amount:22})</code>的方式调用localFn以指定amount的值。</li>
</ul>
<h1 id="directive-实例讲解"><a href="#directive-实例讲解" class="headerlink" title="directive 实例讲解"></a>directive 实例讲解</h1><p>下面的示例都围绕着上面所作的参数说明而展开的。</p>
<h2 id="directive声明实例"><a href="#directive声明实例" class="headerlink" title="directive声明实例"></a>directive声明实例</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 自定义directive</span></span><br><span class="line"><span class="keyword">var</span> myDirective = angular.modeule(<span class="string">'directives'</span>, []);</span><br><span class="line"></span><br><span class="line">myDirective.directive(<span class="string">'myTest'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        restrict: <span class="string">'EMAC'</span>,</span><br><span class="line">        <span class="built_in">require</span>: <span class="string">'^ngModel'</span>,</span><br><span class="line">        scope: &#123;</span><br><span class="line">            ngModel: <span class="string">'='</span></span><br><span class="line">        &#125;,</span><br><span class="line">        template: <span class="string">'&lt;div&gt;&lt;h4&gt;Weather for &#123;&#123;ngModel&#125;&#125;&lt;/h4&lt;/div&gt;'</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;)；</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义controller</span></span><br><span class="line"><span class="keyword">var</span> myControllers = angular.module(<span class="string">'controllers'</span>, []);</span><br><span class="line">myControllers.controller(<span class="string">'testController'</span>, [</span><br><span class="line">    <span class="string">'$scope'</span>,</span><br><span class="line">    <span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>) </span>&#123;</span><br><span class="line">        $scope.name = <span class="string">'this is directive1'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> app = angular.module(<span class="string">'testApp'</span>, [</span><br><span class="line">    <span class="string">'directives'</span>,</span><br><span class="line">    <span class="string">'controllers'</span></span><br><span class="line">]);</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span>=<span class="string">"testApp"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span>=<span class="string">"testController"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">ng-model</span>=<span class="string">"city"</span> <span class="attr">placeholder</span>=<span class="string">"Enter a city"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">my-test</span> <span class="attr">ng-model</span>=<span class="string">"city"</span> &gt;</span><span class="tag">&lt;/<span class="name">my-test</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">my-test</span>=<span class="string">"exp"</span> <span class="attr">ng-model</span>=<span class="string">"city"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">ng-model</span>=<span class="string">"city"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="template与templateUrl的区别和联系"><a href="#template与templateUrl的区别和联系" class="headerlink" title="template与templateUrl的区别和联系"></a>template与templateUrl的区别和联系</h2><p>templateUrl其实根template功能是一样的，只不过templateUrl加载一个html文件，上例中，我们也能发现问题，template后面根的是html的标签，如果标签很多呢，那就比较不爽了。可以将上例中的，template改一下。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">myDirective.directive(<span class="string">'myTest'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        restrict: <span class="string">'EMAC'</span>,</span><br><span class="line">        <span class="built_in">require</span>: <span class="string">'^ngModel'</span>,</span><br><span class="line">        scope: &#123;</span><br><span class="line">            ngModel: <span class="string">'='</span></span><br><span class="line">        &#125;,</span><br><span class="line">        templateUrl:<span class="string">'../partials/tem1.html'</span>   <span class="comment">//tem1.html中的内容就是上例中template的内容。</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="scope重定义"><a href="#scope重定义" class="headerlink" title="scope重定义"></a>scope重定义</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//directives.js中定义myAttr</span></span><br><span class="line">myDirectives.directive(<span class="string">'myAttr'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        restrict: <span class="string">'E'</span>,</span><br><span class="line">        scope: &#123;</span><br><span class="line">            customerInfo: <span class="string">'=info'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        template: <span class="string">'Name: &#123;&#123;customerInfo.name&#125;&#125; Address: &#123;&#123;customerInfo.address&#125;&#125;&lt;br&gt;'</span> +</span><br><span class="line">                  <span class="string">'Name: &#123;&#123;vojta.name&#125;&#125; Address: &#123;&#123;vojta.address&#125;&#125;'</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//controller.js中定义attrtest</span></span><br><span class="line">myControllers.controller(<span class="string">'attrtest'</span>,[<span class="string">'$scope'</span>,</span><br><span class="line">    <span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>) </span>&#123;</span><br><span class="line">        $scope.naomi = &#123;</span><br><span class="line">            name: <span class="string">'Naomi'</span>,</span><br><span class="line">            address: <span class="string">'1600 Amphitheatre'</span></span><br><span class="line">        &#125;;</span><br><span class="line">        $scope.vojta = &#123;</span><br><span class="line">            name: <span class="string">'Vojta'</span>,</span><br><span class="line">            address: <span class="string">'3456 Somewhere Else'</span></span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">]);</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// html中</span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span>=<span class="string">"testApp"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span>=<span class="string">"attrtest"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">my-attr</span> <span class="attr">info</span>=<span class="string">"naomi"</span>&gt;</span><span class="tag">&lt;/<span class="name">my-attr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>其运行结果如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Name: Naomi Address: 1600 Amphitheatre      //有值,因为customerInfo定义过的</span><br><span class="line">Name: Address:                              //没值 ，因为scope重定义后，vojta是没有定义的</span><br></pre></td></tr></table></figure>
<p>我们将上面的directive简单的改一下，</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">myDirectives.directive(<span class="string">'myAttr'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        restrict: <span class="string">'E'</span>,</span><br><span class="line">        template: <span class="string">'Name: &#123;&#123;customerInfo.name&#125;&#125; Address: &#123;&#123;customerInfo.address&#125;&#125;&lt;br&gt;'</span> +</span><br><span class="line">                  <span class="string">'Name: &#123;&#123;vojta.name&#125;&#125; Address: &#123;&#123;vojta.address&#125;&#125;'</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>运行结果如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Name: Address:</span><br><span class="line">Name: Vojta Address: 3456 Somewhere Else</span><br></pre></td></tr></table></figure>
<p>因为此时的directive没有定义独立的scope，customerInfo是undefined，所以结果正好与上面相反。</p>
<h2 id="transclude的使用"><a href="#transclude的使用" class="headerlink" title="transclude的使用"></a>transclude的使用</h2><p><strong>transclude的用法，有点像jquery里面的$().html()功能</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">myDirective.directive(<span class="string">'myEvent'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        restrict: <span class="string">'E'</span>,</span><br><span class="line">        transclude: <span class="literal">true</span>,</span><br><span class="line">        scope: &#123;</span><br><span class="line">            <span class="string">'close'</span>: <span class="string">'$onClick'</span>      <span class="comment">//根html中的on-click="hideDialog()"有关联关系</span></span><br><span class="line">        &#125;,</span><br><span class="line">        templateUrl: <span class="string">'../partials/event_part.html'</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">myController.controller(<span class="string">'eventTest'</span>, [</span><br><span class="line">    <span class="string">'$scope'</span>,</span><br><span class="line">    <span class="string">'$timeout'</span>,</span><br><span class="line">    <span class="function"><span class="keyword">function</span>(<span class="params">$scope, $timeout</span>) </span>&#123;</span><br><span class="line">        $scope.name = <span class="string">'Tobias'</span>;</span><br><span class="line">        $scope.hideDialog = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            $scope.dialogIsHidden = <span class="literal">true</span>;</span><br><span class="line">            $timeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                $scope.dialogIsHidden = <span class="literal">false</span>;</span><br><span class="line">            &#125;, <span class="number">2000</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">]);</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span>=<span class="string">"phonecatApp"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span>=<span class="string">"eventtest"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">my-event</span> <span class="attr">ng-hide</span>=<span class="string">"dialogIsHidden"</span> <span class="attr">on-click</span>=<span class="string">"hideDialog()"</span>&gt;</span></span><br><span class="line">            Check out the contents, &#123;&#123;name&#125;&#125;!</span><br><span class="line">        <span class="tag">&lt;/<span class="name">my-event</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--event_part.html --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span> <span class="attr">ng-click</span>=<span class="string">"close()"</span>&gt;</span>×<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-transclude</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>说明：这段html最终的结构应该如下所示：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span>=<span class="string">"phonecatApp"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span>=<span class="string">"eventtest"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-hide</span>=<span class="string">"dialogIsHidden"</span> <span class="attr">on-click</span>=<span class="string">"hideDialog()"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>Check out the contents, &#123;&#123;name&#125;&#125;!<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>将原来的html元素中的元素<code>Check out the contents, !</code>插入到模版的<code>&lt;div ng-transclude&gt;&lt;/div&gt;</code>中，还会另外附加一个<code>&lt;span&gt;</code>标签。</p>
<h2 id="controller，link，compile之间的关系"><a href="#controller，link，compile之间的关系" class="headerlink" title="controller，link，compile之间的关系"></a>controller，link，compile之间的关系</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">myDirective.directive(<span class="string">'exampleDirective'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        restrict: <span class="string">'E'</span>,</span><br><span class="line">        template: <span class="string">'&lt;p&gt;Hello &#123;&#123;number&#125;&#125;!&lt;/p&gt;'</span>,</span><br><span class="line">        controller: <span class="function"><span class="keyword">function</span>(<span class="params">$scope, $element</span>)</span>&#123;</span><br><span class="line">            $scope.number = $scope.number + <span class="string">"22222 "</span>;</span><br><span class="line">        &#125;,</span><br><span class="line">        link: <span class="function"><span class="keyword">function</span>(<span class="params">scope, el, attr</span>) </span>&#123;</span><br><span class="line">            scope.number = scope.number + <span class="string">"33333 "</span>;</span><br><span class="line">        &#125;,</span><br><span class="line">        compile: <span class="function"><span class="keyword">function</span>(<span class="params">element, attributes</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                pre: <span class="function"><span class="keyword">function</span> <span class="title">preLink</span>(<span class="params">scope, element, attributes</span>) </span>&#123;</span><br><span class="line">                    scope.number = scope.number + <span class="string">"44444 "</span>;</span><br><span class="line">                &#125;,</span><br><span class="line">                post: <span class="function"><span class="keyword">function</span> <span class="title">postLink</span>(<span class="params">scope, element, attributes</span>) </span>&#123;</span><br><span class="line">                    scope.number = scope.number + <span class="string">"55555 "</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//controller.js添加</span><br><span class="line">myController.controller('directive2',[</span><br><span class="line">    '$scope',</span><br><span class="line">    function($scope) &#123;</span><br><span class="line">        $scope.number = '1111 ';</span><br><span class="line">    &#125;</span><br><span class="line">]);</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//html</span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span>=<span class="string">"testApp"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span>=<span class="string">"directive2"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">example-directive</span>&gt;</span><span class="tag">&lt;/<span class="name">example-directive</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>上面小例子的运行结果如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello 1111 22222 44444 5555 !</span><br></pre></td></tr></table></figure>
<p><strong>由结果可以看出来，controller先运行，compile后运行，link不运行。</strong></p>
<p>我们现在将<code>compile</code>属性注释掉后，得到的运行结果如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello 1111 22222 33333 !</span><br></pre></td></tr></table></figure>
<p><strong>由结果可以看出来，controller先运行，link后运行，link和compile不兼容。一般地，compile比link的优先级要高。</strong></p>


            <div class="post-info">
    <p class="eof">- EOF -</p>
    <p class="copyright">All rights reserved <a href="http://gejiawen.github.io/about">@gejiawen</a>.</p>
    <p class="link">本文链接：<a href="http://blog.gejiawen.com/2014/07/16/usage-for-angularjs-directive/">http://blog.gejiawen.com/2014/07/16/usage-for-angularjs-directive/</a></p>

    <div class="share">
    分享本页：
    
        <div class="bdsharebuttonbox"><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信">微信</a><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间">QQ空间</a><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博">新浪微博</a><a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博">腾讯微博</a><a href="#" class="bds_more" data-cmd="more"></a></div>
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{"bdSize":16}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>

    
    
</div>

</div>


            
    <section class="comment">
    <div class="ds-thread" data-thread-key="usage-for-angularjs-directive" data-title="AngularJS Directive用法说明" data-url="http://blog.gejiawen.com/2014/07/16/usage-for-angularjs-directive/" data-author-key="gejiawen"></div>
</section>


<script type="text/javascript">
var duoshuoQuery = {short_name:"gejiawen-blog"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';
        ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
</script>





        </div>
    </div>
</article>

    <footer id="footer">
        <div id="bottom-tip">
            蛋糕仙人 —— <small>技术人需要危机感</small>
        </div>
        <small>该博客由 <a href="https://hexo.io/" target="_blank">Hexo</a> 强力驱动，搭载 <a href="https://github.com/gejiawen/hexadillax2" target="_blank">Hexadillax2</a> 主题</small><br />
        <!--<small>如果你访问github速度过慢，可移步本站的备份站点<a href="http://gejiawen.gitcafe.io">gejiawen.gitcafe.io</a></small><br />-->
        <small>&copy; 2017 <a href="http://blog.gejiawen.com" target="_blank">gejiawen</a>&nbsp;<a href="http://www.miitbeian.gov.cn/" target="_blank">皖ICP备16008778号</a></small>
    </footer>
    
    <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e4dd778a6204eb51e4f25460e37481ad";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>


    <script type="text/javascript" src="http://tajs.qq.com/stats?sId=58628762" charset="UTF-8"></script>


    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-51347904-1', 'auto');
  ga('send', 'pageview');
</script>

</body>
</html>


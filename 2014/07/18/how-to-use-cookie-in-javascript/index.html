

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    
    <meta name="author" content="gejiawen">
    
    <meta name="description" content="本文系转载，但是找不到原文的地址了。:(
什么是Cookie“cookie是存储于访问者的计算机中的变量。每当同一台计算机通过浏览器请求某个页面时，就会发送这个 cookie。你可以使用 JavaScript 来创建和取回cookie的值。” - w3school
cookie是访问过的网站创建的文">
    
    

    
    <link rel="alternative" href="atom.xml" title="蛋糕仙人" type="application/atom+xml">
    
    
    

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Javascript操作Cookie | 蛋糕仙人 · 技术人需要危机感</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/style.css">

    <!-- Javascript -->
    <script src="/js/jquery-2.1.0.min.js"></script>
    <script src="/js/jquery.backstretch.min.js"></script>
    <script src="/bootstrap/js/bootstrap.min.js"></script>
    <script src="/js/headroom.min.js"></script>
    <script src="/js/jquery.headroom.min.js"></script>
    <script src="/js/common.js"></script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    
    <meta name="baidu-site-verification" content="SzJ3MGdmeo" />


    <meta name="360-site-verification" content="afe5dc96bbb8d111b618f78493b95bb8" />


    <!--<meta name="baidu-site-verification" content="SzJ3MGdmeo" />-->
    <!--<meta name="360-site-verification" content="afe5dc96bbb8d111b618f78493b95bb8" />-->

</head>
<body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-inverse" role="banner">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="http://blog.gejiawen.com" title="蛋糕仙人">蛋糕仙人</a>
            </div>

            <div role="navigation" class="collapse navbar-collapse bs-navbar-collapse">
                
                <ul class="nav navbar-nav pull-right">
                    <li>
                        <a class="max-width max-w300" title="技术人需要危机感" href="/feelings">技术人需要危机感</a>
                    </li>
                </ul>
                

                <ul class="nav navbar-nav">
                    
                    <li id="nav-index">
                        <a href="/" target="">首页</a>
                    </li>
                    
                    <li id="nav-archives">
                        <a href="/archives" target="">归档</a>
                    </li>
                    
                    <li id="nav-categories">
                        <a href="/categories" target="">分类</a>
                    </li>
                    
                    <li id="nav-tags">
                        <a href="/tags" target="">标签</a>
                    </li>
                    
                    <li id="nav-pick">
                        <a href="http://book.gejiawen.com/fucking-days-to-be-a-coder" target="_blank">拾遗</a>
                    </li>
                    
                    <li id="nav-about">
                        <a href="/about" target="">关于</a>
                    </li>
                    

                    <li id="nav-github"><a href="https://github.com/gejiawen" target="_blank">GitHub</a></li>
                    <!--<li id="nav-rss"><a href="/atom.xml" target="_blank">Rss</a></li>-->
                    <li id="nav-search"><input type="text" id="search" placeholder="search" /></li>
                </ul>
            </div>
        </div>
    </nav>

    <script>
    var bgRoot = "http://7xkwt1.com1.z0.glb.clouddn.com/background-";
    var bgLength = "74";
    var bgRandom = false;
    var bgImage = "http://7xkwt1.com1.z0.glb.clouddn.com/background-64.jpg";

    $(function() {
        // page-id...
        var pageId = "2014/07/18/how-to-use-cookie-in-javascript/";
        pageId = pageId.substr(0, pageId.indexOf("/"));
        if(pageId === "") pageId = "index";

        $("#nav-" + pageId).addClass("active");
    });
    </script>

    <article class="post container">
    <div class="well post-body first-post last-post">
        <h1>Javascript操作Cookie</h1>

        <div class="time-info">
            
<span class="article-tags">
    
    Tags: <a href="/tags/转载/">转载</a>&nbsp;<a href="/tags/js/">js</a>&nbsp;
</span>



<span class="article-categories">
    Category:
    <a class="article-category-link" href="/categories/JAVASCRIPT/">JAVASCRIPT</a>
</span>


        </div>
        <div class="time-info">
            发表: <time datetime="2014-07-18T09:43:40.000Z"
                       itemprop="datePublished">2014-07-18 17:43:40</time>
            
            更新: <time datetime="2017-01-15T17:16:24.000Z"
                       itemprop="dateModified">2017-01-16 01:16:24</time>
            
        </div>

        <div class="post-body-inner">
            
                <div id="toc" class="toc-article well">
                    <strong class="toc-title">大纲</strong>
                    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#什么是Cookie"><span class="toc-number">1.</span> <span class="toc-text">什么是Cookie</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Cookie基础知识"><span class="toc-number">2.</span> <span class="toc-text">Cookie基础知识</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Cookie常见问题"><span class="toc-number">3.</span> <span class="toc-text">Cookie常见问题</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Cookie基础用法"><span class="toc-number">4.</span> <span class="toc-text">Cookie基础用法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#简单的存取操作"><span class="toc-number">4.1.</span> <span class="toc-text">简单的存取操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cookie的读取操作"><span class="toc-number">4.2.</span> <span class="toc-text">cookie的读取操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#设置cookie的有效期"><span class="toc-number">4.3.</span> <span class="toc-text">设置cookie的有效期</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Cookie高级篇"><span class="toc-number">5.</span> <span class="toc-text">Cookie高级篇</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#cookie路径概念"><span class="toc-number">5.1.</span> <span class="toc-text">cookie路径概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cookie域概念"><span class="toc-number">5.2.</span> <span class="toc-text">cookie域概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cookie安全性"><span class="toc-number">5.3.</span> <span class="toc-text">cookie安全性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cookie编码细节"><span class="toc-number">5.4.</span> <span class="toc-text">cookie编码细节</span></a></li></ol></li></ol>
                </div>
            

            <p>本文系转载，但是找不到原文的地址了。:(</p>
<h1 id="什么是Cookie"><a href="#什么是Cookie" class="headerlink" title="什么是Cookie"></a>什么是Cookie</h1><p>“cookie是存储于访问者的计算机中的变量。每当同一台计算机通过浏览器请求某个页面时，就会发送这个 cookie。你可以使用 JavaScript 来创建和取回cookie的值。” - w3school</p>
<p>cookie是访问过的网站创建的文件，用于存储浏览信息，例如个人资料信息。</p>
<p>从JavaScript的角度看，cookie就是一些字符串信息。这些信息存放在客户端的计算机中，用于客户端计算机与服务器之间传递信息。</p>
<p>在JavaScript中可以通过<code>document.cookie</code>来读取或设置这些信息。由于cookie多用在客户端和服务端之间进行通信，所以除了JavaScript以外，服务端的语言（如PHP）也可以存取cookie。</p>
<h1 id="Cookie基础知识"><a href="#Cookie基础知识" class="headerlink" title="Cookie基础知识"></a>Cookie基础知识</h1><ul>
<li>cookie是有大小限制的，每个cookie所存放的数据不能超过4kb，如果cookie字符串的长度超过4kb，则该属性将返回空字符串。</li>
<li>由于cookie最终都是以文件形式存放在客户端计算机中，所以查看和修改 cookie 都是很方便的，这就是为什么常说cookie不能存放重要信息的原因。</li>
<li>cookie是存在有效期的。在默认情况下，一个cookie的生命周期就是在浏览器关闭的时候结束。如果想要cookie能在浏览器关掉之后还可以使用，就必须要为该cookie设置有效期，也就是cookie的失效日期。</li>
<li><code>alert(typeof document.cookie)</code>结果是<code>String</code>。</li>
<li>cookie有域和路径这个概念。<strong>域就是domain的概念</strong>，因为浏览器是个注意安全的环境，所以不同的域之间是不能互相访问 cookie的(当然可以通过特殊设置的达到cookie跨域访问)。<strong>路径就是routing的概念</strong>，一个网页所创建的cookie只能被与这个网页在同一目录或子目录下得所有网页访问，而不能被其他目录下得网页访问。</li>
<li>其实创建cookie的方式和定义变量的方式有些相似，都需要使用cookie名称和cookie值。同个网站可以创建多个cookie，而多个cookie可以存放在同一个cookie文件中。</li>
</ul>
<h1 id="Cookie常见问题"><a href="#Cookie常见问题" class="headerlink" title="Cookie常见问题"></a>Cookie常见问题</h1><ul>
<li>cookie 存在两种类型：<ul>
<li>你浏览的当前网站本身设置的cookie。</li>
<li>来自在网页上嵌入广告或图片等其他域来源的第三方cookie(网站可通过使用这些cookie跟踪你的使用信息)。</li>
</ul>
</li>
<li>刚刚基础知识里面有说到cookie生命周期的问题，其实cookie大致可分为两种状态：<ul>
<li>临时性质的cookie。当前使用的过程中网站会储存一些你的个人信息，当浏览器关闭后这些信息也会从计算机中删除。</li>
<li>设置失效时间的cookie。就算浏览器关闭了，这些信息业依然会在计算机中。如登录名称和密码，这样无须在每次到特定站点时都进行登录。这种cookie可在计算机中保留几天、几个月甚至几年。</li>
</ul>
</li>
<li>cookie 有两种清除方式：<ul>
<li>通过浏览器工具清除cookie(有第三方的工具，浏览器自身也有这种功能)。</li>
<li>通过设置cookie的有效期来清除 cookie。</li>
<li>注：<strong>删除cookie有时可能导致某些网页无法正常运行</strong></li>
</ul>
</li>
<li>浏览器可以通过设置来接受和拒绝访问cookie。</li>
<li>出于功能和性能的原因考虑，建议尽量降低cookie的使用数量，并且要尽量使用小cookie。</li>
<li>关于cookie编码的细节问题将会在cookie高级篇中单独介绍。</li>
<li>假如是本地磁盘中的页面，chrome的控制台是无法用JavaScript读写操作cookie的，解决办法…换一个浏览器^_^。</li>
</ul>
<h1 id="Cookie基础用法"><a href="#Cookie基础用法" class="headerlink" title="Cookie基础用法"></a>Cookie基础用法</h1><h2 id="简单的存取操作"><a href="#简单的存取操作" class="headerlink" title="简单的存取操作"></a>简单的存取操作</h2><p>在使用JavaScript存取cookie时，必须要使用Document对象的cookie属性。<br>一行代码介绍如何创建和修改一个cookie，</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.cookie = <span class="string">'username=Darren'</span>;</span><br></pre></td></tr></table></figure>
<p>以上代码中<code>username</code>表示cookie名称，<code>Darren</code>表示这个名称对应的值。假设cookie名称并不存在，那么就是创建一个新的cookie；如果存在就是修改了这个cookie名称对应的值。如果要多次创建cookie，重复使用这个方法即可。</p>
<h2 id="cookie的读取操作"><a href="#cookie的读取操作" class="headerlink" title="cookie的读取操作"></a>cookie的读取操作</h2><p>要精确的对cookie进行读取其实很简单，就是对字符串进行操作。从w3school上copy这段代码来做分析，</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCookie</span>(<span class="params">c_name</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 先查询cookie是否为空，为空就return</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.cookie.length &gt; <span class="number">0</span>) &#123;　　</span><br><span class="line">        <span class="comment">// 通过String对象的indexOf()来检查这个cookie是否存在，不存在就为 -1</span></span><br><span class="line">        c_start = <span class="built_in">document</span>.cookie.indexOf(c_name + <span class="string">"="</span>)；</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (c_start !== <span class="number">-1</span>) &#123;</span><br><span class="line">            <span class="comment">//最后这个+1其实就是表示"="号啦，这样就获取到了cookie值的开始位置</span></span><br><span class="line">            c_start = c_start + c_name.length + <span class="number">1</span>;　　</span><br><span class="line">            <span class="comment">// 其实我刚看见indexOf()第二个参数的时候猛然有点晕，后来想起来表示指定的开始索引的位置...这句是为了得到值的结束位置。因为需要考虑是否是最后一项，所以通过";"号是否存在来判断</span></span><br><span class="line">            c_end=<span class="built_in">document</span>.cookie.indexOf(<span class="string">";"</span>,c_start);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (c_end === <span class="number">-1</span>) ｛</span><br><span class="line">                c_end = <span class="built_in">document</span>.cookie.length；</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 通过substring()得到了值。想了解unescape()得先知道escape()是做什么的，都是很重要的基础，想了解的可以搜索下，在文章结尾处也会进行讲解cookie编码细节</span></span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">unescape</span>(<span class="built_in">document</span>.cookie.substring(c_start,c_end));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当然想实现读取cookie的方法还有不少，比如数组，正则等，这里就不往细说了。</p>
<h2 id="设置cookie的有效期"><a href="#设置cookie的有效期" class="headerlink" title="设置cookie的有效期"></a>设置cookie的有效期</h2><p>文章中常常出现的cookie的生命周期也就是有效期和失效期，即cookie的存在时间。在默认的情况下，cookie会在浏览器关闭的时候自动清除，但是我们可以通过expires来设置cookie的有效期。语法如下，</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.cookie = <span class="string">"name=value;expires=date"</span>;</span><br></pre></td></tr></table></figure>
<p>面代码中的date值为GMT(格林威治时间)格式的日期型字符串，生成方式如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">date.setDate(date.getDate() + <span class="number">30</span>);</span><br><span class="line">date.toGMTString();</span><br></pre></td></tr></table></figure>
<p>上面三行代码分解为几步来看，</p>
<ul>
<li>通过<code>new</code>生成一个Date的实例，得到当前的时间</li>
<li><code>getDate()</code>方法得到当前本地月份中的某一天，接着加上30就是我希望这个cookie能过在本地保存30天</li>
<li>接着通过<code>setDate()</code>方法来设置时间</li>
<li>最后用<code>toGMTString()</code>方法把Date对象转换为字符串，并返回结果</li>
</ul>
<p>通过下面这个完整的函数来说明在创建 cookie 的过程中我们需要注意的地方 - 从w3school复制下来的。创建一个在cookie中存储信息的函数，</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setCookie</span>(<span class="params">c_name, value, expiredays</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> exdate=<span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    exdate.setDate(exdate.getDate() + expiredays);</span><br><span class="line">    <span class="built_in">document</span>.cookie = c_name + <span class="string">"="</span> + <span class="built_in">escape</span>(value) + ((expiredays === <span class="literal">null</span>) ? <span class="string">""</span> : <span class="string">";expires="</span> + exdate.toGMTString());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用</span></span><br><span class="line">setCookie(<span class="string">'username'</span>,<span class="string">'Darren'</span>, <span class="number">30</span>)；</span><br></pre></td></tr></table></figure>
<p>现在我们这个函数是按照天数来设置cookie的有效时间，如果想以其他单位（如：小时）来设置，那么改变第三行代码即可：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exdate.setHours(exdate.getHours() + expiredays);</span><br></pre></td></tr></table></figure>
<h1 id="Cookie高级篇"><a href="#Cookie高级篇" class="headerlink" title="Cookie高级篇"></a>Cookie高级篇</h1><h2 id="cookie路径概念"><a href="#cookie路径概念" class="headerlink" title="cookie路径概念"></a>cookie路径概念</h2><p>在基础知识中有提到cookie有域和路径的概念，现在来介绍路径在cookie中的作用。</p>
<p>cookie一般都是由于用户访问页面而被创建的，可是并不是只有在创建cookie的页面才可以访问这个cookie。</p>
<p>默认情况下，只有与创建cookie的页面在同一个目录或子目录下的网页才可以访问，这个是因为安全方面的考虑，造成不是所有页面都可以随意访问其他页面创建的cookie。举个例子，</p>
<blockquote>
<p>在”<a href="http://www.cnblogs.com/Darren_code/&quot;这个页面创建一个cookie，那么在&quot;/Darren_code/&quot;这个路径下的页面如：&quot;http://www.cnblogs.com/Darren_code/archive/2011/11/07/Cookie.html&quot;这个页面默认就能取到cookie信息。" target="_blank" rel="external">http://www.cnblogs.com/Darren_code/&quot;这个页面创建一个cookie，那么在&quot;/Darren_code/&quot;这个路径下的页面如：&quot;http://www.cnblogs.com/Darren_code/archive/2011/11/07/Cookie.html&quot;这个页面默认就能取到cookie信息。</a></p>
</blockquote>
<p>可在默认情况下，”<a href="http://www.cnblogs.com&quot;或者&quot;http://www.cnblogs.com/xxxx/&quot;就不可以访问这个cookie（光看没用，实践出真理^_^）。" target="_blank" rel="external">http://www.cnblogs.com&quot;或者&quot;http://www.cnblogs.com/xxxx/&quot;就不可以访问这个cookie（光看没用，实践出真理^_^）。</a></p>
<p>那么如何让这个cookie能被其他目录或者父级的目录访问类，通过设置cookie的路径就可以实现。例子如下，</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.cookie = <span class="string">"name=value;path=path"</span>;</span><br><span class="line"><span class="built_in">document</span>.cookie = <span class="string">"name=value;expires=date;path=path"</span>;</span><br></pre></td></tr></table></figure>
<p>path就是cookie的路径。</p>
<p>最常用的例子就是让cookie在跟目录下，这样不管是哪个子页面创建的cookie，所有的页面都可以访问到了，</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.cookie = <span class="string">"name=Darren;path=/"</span>;</span><br></pre></td></tr></table></figure>
<h2 id="cookie域概念"><a href="#cookie域概念" class="headerlink" title="cookie域概念"></a>cookie域概念</h2><p>路径能解决在同一个域下访问 cookie 的问题，咱们接着说 cookie 实现同域之间访问的问题。语法如下，</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.cookie = <span class="string">"name=value;path=path;domain=domain"</span>;</span><br></pre></td></tr></table></figure>
<p>domain就是设置的cookie域的值。</p>
<p>例如”www.qq.com”与”sports.qq.com”公用一个关联的域名”qq.com”，我们如果想让 “sports.qq.com”下的cookie被 “www.qq.com” 访问，我们就需要用到cookie的domain属性，并且需要把path属性设置为 “/“。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.cookie = <span class="string">"username=Darren;path=/;domain=qq.com"</span></span><br></pre></td></tr></table></figure>
<p><strong>注：一定的是同域之间的访问，不能把domain的值设置成非主域的域名。</strong></p>
<h2 id="cookie安全性"><a href="#cookie安全性" class="headerlink" title="cookie安全性"></a>cookie安全性</h2><p>通常cookie信息都是使用HTTP连接传递数据，这种传递方式很容易被查看，所以cookie存储的信息容易被窃取。假如cookie中所传递的内容比较重要，那么就要求使用加密的数据传输。所以cookie的这个属性的名称是<code>secure</code>，默认的值为空。如果一个cookie的属性为secure，那么它与服务器之间就通过HTTPS或者其它安全协议传递数据。语法如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.cookie = <span class="string">"username=Darren;secure"</span>;</span><br></pre></td></tr></table></figure>
<p>把cookie设置为secure，<strong>只保证cookie与服务器之间的数据传输过程加密</strong>，而保存在本地的cookie文件并不加密。如果想让本地cookie也加密，得自己加密数据。注：就算设置了<code>secure</code>属性也并不代表他人不能看到你机器本地保存的cookie信息，所以说到底，别把重要信息放cookie就对了。</p>
<h2 id="cookie编码细节"><a href="#cookie编码细节" class="headerlink" title="cookie编码细节"></a>cookie编码细节</h2><p>原本来想在常见问题那段介绍cookie编码的知识，因为如果对这个不了解的话编码问题确实是一个坑，所以还是详细说说。在输入cookie信息时不能包含空格，分号，逗号等特殊符号，而在一般情况下，cookie信息的存储都是采用未编码的方式。所以，在设置cookie信息以前要先使用<code>escape()</code>函数将cookie值信息进行编码，在获取到 cookie值得时候再使用<code>unescape()</code>函数把值进行转换回来。如设置cookie时：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.cookie = name + <span class="string">"="</span> + <span class="built_in">escape</span> (value);</span><br></pre></td></tr></table></figure>
<p>再看看基础用法时提到过的getCookie()内的一句：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="built_in">unescape</span>(<span class="built_in">document</span>.cookie.substring(c_start,c_end));</span><br></pre></td></tr></table></figure>
<p>这样就不用担心因为在cookie值中出现了特殊符号而导致cookie信息出错了。</p>


            <div class="post-info">
    <p class="eof">- EOF -</p>
    <p class="copyright">All rights reserved <a href="http://gejiawen.github.io/about">@gejiawen</a>.</p>
    <p class="link">本文链接：<a href="http://blog.gejiawen.com/2014/07/18/how-to-use-cookie-in-javascript/">http://blog.gejiawen.com/2014/07/18/how-to-use-cookie-in-javascript/</a></p>

    <div class="share">
    分享本页：
    
        <div class="bdsharebuttonbox"><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信">微信</a><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间">QQ空间</a><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博">新浪微博</a><a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博">腾讯微博</a><a href="#" class="bds_more" data-cmd="more"></a></div>
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{"bdSize":16}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>

    
    
</div>

</div>


            
    <section class="comment">
    <div class="ds-thread" data-thread-key="how-to-use-cookie-in-javascript" data-title="Javascript操作Cookie" data-url="http://blog.gejiawen.com/2014/07/18/how-to-use-cookie-in-javascript/" data-author-key="gejiawen"></div>
</section>


<script type="text/javascript">
var duoshuoQuery = {short_name:"gejiawen-blog"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';
        ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
</script>





        </div>
    </div>
</article>

    <footer id="footer">
        <div id="bottom-tip">
            蛋糕仙人 —— <small>技术人需要危机感</small>
        </div>
        <small>该博客由 <a href="https://hexo.io/" target="_blank">Hexo</a> 强力驱动，搭载 <a href="https://github.com/gejiawen/hexadillax2" target="_blank">Hexadillax2</a> 主题</small><br />
        <!--<small>如果你访问github速度过慢，可移步本站的备份站点<a href="http://gejiawen.gitcafe.io">gejiawen.gitcafe.io</a></small><br />-->
        <small>&copy; 2017 <a href="http://blog.gejiawen.com" target="_blank">gejiawen</a>&nbsp;<a href="http://www.miitbeian.gov.cn/" target="_blank">皖ICP备16008778号</a></small>
    </footer>
    
    <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e4dd778a6204eb51e4f25460e37481ad";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>


    <script type="text/javascript" src="http://tajs.qq.com/stats?sId=58628762" charset="UTF-8"></script>


    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-51347904-1', 'auto');
  ga('send', 'pageview');
</script>

</body>
</html>


postid: 'regexp-in-javascript'
title: Javascriptä¸­ä½¿ç”¨RegExpçš„ç®€ç•¥æŒ‡å—
date: 2015-09-17 10:42:14
categories: [Javascript]
tags: [æ­£åˆ™è¡¨è¾¾å¼]

---

# å‰è¨€

RegExpæ˜¯Javascriptä¸­çš„ä¸€ä¸ªå†…ç½®å¯¹è±¡ã€‚ä½¿ç”¨å®ƒå¯ä»¥åœ¨javascriptä¸­è¿›è¡Œä¸€äº›æ­£åˆ™æ–¹é¢çš„æ“ä½œã€‚æœ¬æ–‡æ‰“ä¸æ‰“ç®—è¯¦ç»†çš„ä»‹ç»RegExpçš„å…·ä½“å†…å®¹ï¼Œæ¯”å¦‚å­åŒ¹é…ã€åˆ†ç»„ã€æƒ°æ€§åŒ¹é…ç­‰ç­‰è¿™äº›å†…å®¹çš„å…·ä½“ç”¨æ³•ã€‚æœ¬æ–‡ä»…ä»å®ç”¨çš„è§’åº¦æ¥é˜è¿°regexpåœ¨javascriptä¸­çš„ä¸€äº›å¸¸ç”¨ä»¥åŠåŸºæœ¬æ–¹æ³•ã€‚å…³äºRegExpçš„å…·ä½“æ–‡æ¡£ï¼Œå¯å‚é˜…[w3school](http://www.w3school.com.cn/jsref/jsref_obj_regexp.asp)æˆ–è€…[MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp)ã€‚

# åˆ›å»º

åœ¨Javascriptä¸­æœ‰ä¸¤ç§æ–¹å¼æ¥åˆ›å»ºä¸€ä¸ªregexpã€‚ä¸€ç§æ˜¯ä½¿ç”¨`new RegExp(pattern[, flags])`ï¼Œå¦ä¸€ç§æ˜¯ä½¿ç”¨`/pattern/[flags]`ã€‚å‰è€…åˆ›å»ºäº†ä¸€ä¸ªregexpå¯¹è±¡ï¼Œåè€…æ˜¯ä¸€ä¸ªå¯¹è±¡å­—é¢é‡ã€‚

è¿™é‡Œæœ‰ä¸¤ç‚¹ç¨å¾®æä¸€ä¸‹ï¼Œ

- ä½¿ç”¨ç¬¬ä¸€ç§æ–¹å¼æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¼ é€’ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥ä¼ é€’ä¸€ä¸ªæ­£åˆ™å­—é¢é‡ã€‚
- ä½¿ç”¨å­—ç¬¦ä¸²åˆ›å»ºregexpå¯¹è±¡æ—¶ï¼Œæ³¨æ„å…ƒå­—ç¬¦çš„è½¬ä¹‰ã€‚

ä¸‹é¢æ˜¯å‡ ä¸ªä¾‹å­ï¼Œ

```javascript
var reg1 = /ab+c/i;
var reg2 = new RegExp('ab+c', 'i');
var reg3 = new RegExp(/ab+c/, 'i');

var reg4 = /\w+/;
var reg5 = new RegExp('\\w+');
```

# æ–¹æ³•

åœ¨Javascriptä¸­ï¼Œè·Ÿregexpå¯¹è±¡å…³è”æœ€ä¸ºå¯†åˆ‡çš„ä¸€èˆ¬éƒ½æ˜¯Stringå¯¹è±¡ã€‚æ”¯æŒregexpçš„Stringæ–¹æ³•æœ‰å¦‚ä¸‹å‡ ä¸ªï¼Œ

| æ–¹æ³• | è¯´æ˜ |
| :--- | :--- |
| `search` | æ£€ç´¢ä¸æ­£åˆ™è¡¨è¾¾å¼ç›¸åŒ¹é…çš„å€¼ |
| `match` | æ‰¾åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é… |
| `replace` | æ›¿æ¢ä¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å­ä¸² |
| `split` | æŠŠå­—ç¬¦ä¸²åˆ†å‰²ä¸ºå­—ç¬¦ä¸²æ•°ç»„ |

ä¸Šé¢çš„4ä¸ªæ–¹æ³•éƒ½å¯ä»¥ä½¿ç”¨regexpä½œä¸ºå‚æ•°ï¼Œè€Œä¸”æ ¹æ®ä¼ å…¥çš„regexpå¯èƒ½è¿”å›çš„ç»“æœä¼šæœ‰å¾ˆå¤§çš„ä¸åŒã€‚

é™¤æ­¤ä¹‹å¤–ï¼Œregexpå¯¹è±¡æœ¬èº«ä¹Ÿæœ‰ä¸€äº›æ–¹æ³•ï¼Œä»–ä»¬æ˜¯ï¼Œ

| æ–¹æ³• | è¯´æ˜ |
| :--- | :--- |
| `compile` | ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼ |
| `exec` | æ£€ç´¢å­—ç¬¦ä¸²ä¸­æŒ‡å®šçš„å€¼ã€‚è¿”å›æ‰¾åˆ°çš„å€¼ï¼Œå¹¶ç¡®å®šå…¶ä½ç½®ã€‚ |
| `test` | æ£€ç´¢å­—ç¬¦ä¸²ä¸­æŒ‡å®šçš„å€¼ã€‚è¿”å› true æˆ– falseã€‚ |

å…³äºå„ä¸ªæ–¹æ³•åœ¨javascriptä¸­çš„å…·ä½“ä½¿ç”¨ç¤ºä¾‹ï¼Œè¯·ç»§ç»­å¾€ä¸‹çœ‹ğŸ˜„

# ç¤ºä¾‹

ä¸‹é¢ï¼Œæˆ‘å°†ä¼šä½¿ç”¨ä¸€ç³»åˆ—çš„çœŸå®ç¤ºä¾‹æ¥é˜è¿°regexpä»¥åŠç›¸å…³æ–¹æ³•çš„ç”¨æ³•ã€‚

```javascript
// æµ‹è¯•`test`æ–¹æ³•

var reg = /he/;
reg.test('hehe'); // true
reg.test('boy'); // false
reg.test('HEHE'); // false å› ä¸ºregexpé»˜è®¤æ˜¯å¤§å°å†™æ•æ„Ÿçš„

var reg2 = /he/i;
reg2.test('HEHE'); // true
reg2.test('I am a good boy, and she is a bad girl.'); // true åªè¦è¢«åŒ¹é…çš„å­—ç¬¦ä¸²ä¸­åŒ…å«heï¼ˆHEã€hEã€Heï¼‰å³å¯ã€‚

var reg3 = /^he/i;
reg3.test('She is a good girl'); // false å› ä¸ºheä¸æ˜¯å­—ç¬¦ä¸²çš„é¦–éƒ¨ã€‚

var reg4 = /he$/i;
reg4.test('She loves he'); // true å› ä¸ºheæ˜¯å­—ç¬¦ä¸²çš„å°¾éƒ¨ã€‚

var reg5 = /^he$/i;
reg5.test('he'); // true å› ä¸ºå­—ç¬¦ä¸²æ˜¯ä»¥hå¼€å§‹ï¼Œä»¥eç»“æŸï¼Œä¸”ä¸­é—´æ²¡æœ‰ä»»ä½•å…¶ä»–å­—ç¬¦ã€‚

var reg6 = /\s/; // å…ƒå­—ç¬¦`\s`åŒ¹é…ä»»ä½•ç©ºç™½å­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢é¡µç¬¦ç­‰ç­‰  
reg6.test('ge jiawen'); // å­—ç¬¦ä¸²ä¸­æœ‰ç©ºæ ¼

var reg7 = /^[a-z]/; // å…ƒå­—ç¬¦`[]`åŒ¹é…æŒ‡å®šèŒƒå›´å†…çš„ä»»æ„å­—ç¬¦
reg6.test('good123'); // true å­—ç¬¦ä¸²ä¸­å¿…é¡»è¦æ˜¯ä»¥å­—æ¯å¼€å¤´

// ä»…ä»…çŸ¥é“äº†å­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…æ¨¡å¼è¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬è¿˜éœ€è¦çŸ¥é“å“ªäº›å­—ç¬¦åŒ¹é…äº†æ¨¡å¼

var reg8 = /^[a-z]+\s+\d+$/i; // é‡è¯`+`ï¼Œè¡¨ç¤ºè‡³å°‘åŒ¹é…ä¸€æ¬¡
reg8.test('Ubuntu 8'); // true å› ä¸ºåŒ¹é…åˆ°äº†ç‰ˆæœ¬å·

// æˆ‘ä»¬ä½¿ç”¨regexpçš„execæ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºåŒ¹é…çš„å†…å®¹ï¼Œåç»­çš„æ•°ç»„å…ƒç´ ä¸ºå­åŒ¹é…çš„å†…å®¹ï¼ˆå¦‚æœæœ‰å­åŒ¹é…çš„è¯ï¼‰

var ret = reg8.exec('Ubuntu 8');
console.log(ret[0]); // ['Ubuntu 8']

// æå–åŒ¹é…å†…å®¹ä¸­çš„æ•°å­—

var reg9 = /\d+/;
reg9.exec(reg8.exec('Ubuntu 8')); // ['8']

// è¦æå–'Ubuntu 8'ä¸­çš„æ•°å­—ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä½¿ç”¨å­åŒ¹é…

var reg10 = /^[a-z]+\s+(\d+)/i; // ä¸€èˆ¬æˆ‘ä»¬ä½¿ç”¨`()`æ¥è®¾å®šä¸€ä¸ªå­åŒ¹é…ï¼ˆæˆ–è€…å«åŒ¹é…åˆ†ç»„ï¼‰
reg10.exec('Ubuntu 8'); // ['Ubuntu 8', '8']

// å¯ä»¥è®¾å®šå¤šä¸ªå­åŒ¹é…

var reg11 = /^[a-z]+\s+(\d+)\.(\d+)$/i;
reg11.exec('Ubuntu 14.04'); // ['Ubuntu 14.04', '14', '04']

// ä½¿ç”¨replaceï¼Œè¿›è¡Œå­—ç¬¦ä¸²æ›¿æ¢

var str = 'some money';
str.replace('some', 'much'); // much money
str.replace(/\s+/, '%'); // much%money

// ä½¿ç”¨regexpçš„å…¨å±€åŒ¹é…æ ‡å¿—ï¼Œè¿›è¡Œå¤šæ¬¡åŒ¹é…ã€‚
// å¦‚æœä¸è¿›è¡Œå…¨å±€åŒ¹é…ï¼Œé‚£ä¹ˆregexpå°†åœ¨åŒ¹é…æˆåŠŸä¸€æ¬¡åç»ˆæ­¢åŒ¹é…ã€‚åä¹‹åˆ™åŒ¹é…æ•´ä¸ªå­—ç¬¦ä¸²ã€‚

var str2 = 'some      money'; // åŒ…å«äº†å¤šä¸ªç©ºæ ¼å­—ç¬¦
str2.replace(/\s/, '%'); // some%   money
str2.replace(/\s/g, '%'); // some%%%%money

// splitæ–¹æ³•ä½¿ç”¨regexpã€‚
// åœ¨`[]`ä¸­ä½¿ç”¨`^`è¡¨ç¤ºèŒƒå›´å–åã€‚

var str3 = 'a_bc-d=e--f';
str3.split(/[^a-z]+/g); // ["a", "bc", "d", "e", "f"]

// searchä½¿ç”¨regexpã€‚

var str4 = 'My age is 25 age.';
str4.search(/\d+/); // 10ï¼Œè¡¨ç¤ºåŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®ã€‚å¦‚æœæ²¡æœ‰åŒ¹é…åˆ°åˆ™ä¸º-1

// ä½¿ç”¨matchæ–¹æ³•ã€‚

var str5 = 'My name is Larry. Hello everyone.';
str5.match(/[A-Z]/); // ['M'] å› ä¸ºæˆ‘ä»¬æ²¡æœ‰å…¨å±€åŒ¹é…ã€‚æ‰€ä»¥åŒ¹é…æˆåŠŸä¸€æ¬¡å°±ç»ˆæ­¢äº†
str5.match(/[A-Z]/g); // ["M", "L", "H"]
str5.match(/\b[a-z]\b/ig); // ["My", "name", "is", "Larry", "Hello", "everyone"] åŒ¹é…æ‰€æœ‰çš„å•è¯
str5.match(/\b[a-z]{2}\b/ig); // ["My", "is"] åŒ¹é…æ‰€æœ‰2ä¸ªå­—ç¬¦çš„å•è¯

// æ•è·åˆ†ç»„ä¸éæ•è·åˆ†ç»„ã€‚
// æ•è·åˆ†ç»„å°†`(abc)`ä¸­çš„`abc`åŒ¹é…å†…å®¹ä¹Ÿæ”¾åˆ°ç»“æœæ•°ç»„ä¸­ã€‚è€Œéæ•è·åˆ†ç»„åˆ™ä¸ä¼šã€‚

/(abc){2}/.exec('abcabc'); // ["abcabc", "abc"]
/(?:abc){2}/.exec('abcabcabc') // ["abcabc"]

// å€™é€‰ï¼Œä¹Ÿå°±æ˜¯â€˜æˆ–è€…â€™çš„æ„æ€

/^a|c$/.test('asssc'); // true å› ä¸ºå°†åŒ¹é…å¼€å§‹çš„å­—ç¬¦aï¼Œæˆ–è€…ç»“æŸä½ç½®çš„c
/^(a|bc)$/.test('abc') // false å› ä¸ºåŒ¹é…çš„å­—ç¬¦ä¸²å¿…é¡»æ˜¯aæˆ–è€…bc

// åˆ†ç»„ä¸åå‘å¼•ç”¨ã€‚
// `test`,`match`ç­‰æ–¹æ³•å¯¹åŒ…å«åˆ†ç»„çš„regexpè¿›è¡Œæ“ä½œæ—¶ï¼Œä¼šå°†åˆ†ç»„å­˜å‚¨èµ·æ¥ï¼Œé€šè¿‡åå‘å¼•ç”¨å¯ä»¥æ‹¿åˆ°åˆ†ç»„ã€‚

var reg = /(A?(B?(C?)))/;
reg.test('ABC'); // åå‘å¼•ç”¨è¢«å­˜å‚¨åœ¨RegExpå¯¹è±¡çš„é™æ€å±æ€§$1â€”$9ä¸­  
console.log(RegExp.$1 + ", " + RegExp.$2 + ", " + RegExp.$3); // ABC, BC, C

var reg2 = /\d+(\D)\d+\1\d+/; // åœ¨regexpä¸­å¯ä»¥ä½¿ç”¨`\1`æ¥åå‘å¼•ç”¨åŒ¹é…åˆ°çš„åˆ†ç»„
'2008-1-1'.test(reg2); // true
'2008-1_1'.test(reg2); // false

var reg3 = /(\d)\s(\d)/;
'1234 5678'.replace(reg3, '$2 $1'); // '5678 1234'
 
// æ­£å‘å‰ç»(?=)ä¸è´Ÿå‘å‰ç»(?!)
// æ­£åˆ™è¡¨è¾¾å¼å¼•æ“åœ¨è¿è¡Œæ­£å‘å‰ç»æˆ–è€…è´Ÿå‘å‰ç»æ—¶ï¼Œæ­£åˆ™è¡¨è¾¾å¼å¼•æ“ä¼šç•™æ„å­—ç¬¦ä¸²åé¢çš„éƒ¨åˆ†ï¼Œç„¶åå´ä¸ä¼šçœŸå®çš„ç§»åŠ¨åŒ¹é…æŒ‡é’ˆindexã€‚

// ç¤ºä¾‹ï¼šå¦‚æœæˆ‘è¦åŒ¹é…ä¸€ä¸ªåé¢è·Ÿä¸€ä¸ªæ•°å­—çš„å•è¯ï¼Œä½†æ˜¯ä»…ä»…è¿”å›è¿™ä¸ªå•è¯ä¸åŒ…æ‹¬æ•°å­—ã€‚
var reg = /[a-z]+(?=\d+)/;
var str = 'I am a good2 boy.';
str.match(reg); // ['good']

// ç¤ºä¾‹ï¼šå¦‚æœæˆ‘è¦åŒ¹é…ä¸€ä¸ªåé¢ä¸è·Ÿä¸€ä¸ªæ•°å­—çš„å•è¯ï¼Œä½†æ˜¯ä»…ä»…è¿”å›è¿™ä¸ªå•è¯ä¸åŒ…æ‹¬æ•°å­—ã€‚
var reg = /[a-z]+(?!\d+)\b/g;
var str = 'one1 two2 three four4';
str.match(reg); // ["three"]
```

ä»¥ä¸Šä»£ç å—ä¸­çš„å†…å®¹åŸºæœ¬ä¸Šå°±æ˜¯javascriptä¸­ä½¿ç”¨regexpçš„æ–¹æ–¹é¢é¢äº†ã€‚æŒæ¡è¿™äº›æ–¹æ³•ï¼Œåœ¨ç¼–å†™javascriptä»£ç æ—¶ï¼Œç‰¹åˆ«æ˜¯é’ˆå¯¹ä¸€äº›å­—ç¬¦ä¸²è¿›è¡Œå¤„ç†æ—¶ï¼Œä½¿ç”¨regexpå¾€å¾€ä¼šå…·æœ‰å¾ˆé«˜çš„æ•ˆç‡ã€‚ä¸è¿‡ï¼Œjavascriptä¸­çš„regexpä»…ä»…æ¶µç›–äº†æ­£åˆ™è¡¨è¾¾å¼çš„åŸºæœ¬åŠå¸¸è§ç”¨æ³•ã€‚è¦æƒ³äº†è§£æ›´å¤šæ›´è¯¦ç»†çš„å†…å®¹ï¼Œå¯ä»¥å‚é˜…ç›¸å…³ä¸“é—¨è®²è¿°æ­£åˆ™è¡¨è¾¾å¼çš„ä¹¦ç±ã€‚


# å‚è€ƒåˆ—è¡¨

- [JavaScript RegExp å¯¹è±¡](http://www.w3school.com.cn/jsref/jsref_obj_regexp.asp)
- [MDN-RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp)
- [è¯¦è¿°RegExpçš„ä½¿ç”¨](http://blog.csdn.net/qin9r3y/article/details/24982195)




